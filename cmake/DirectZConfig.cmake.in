@PACKAGE_INIT@

if("${CMAKE_SYSTEM_NAME}" STREQUAL "Linux")
    find_package(Threads REQUIRED)
	find_package(PkgConfig REQUIRED)
	pkg_check_modules(GTKMM REQUIRED IMPORTED_TARGET gtkmm-3.0)
endif()

# Set variables pointing to install locations
set_and_check(DirectZ_INCLUDE_DIRS "@PACKAGE_CMAKE_INSTALL_INCLUDEDIR@")
set(DirectZ_LIBRARIES DirectZ::DirectZ)

# Load the exported targets
include("${CMAKE_CURRENT_LIST_DIR}/DirectZTargets.cmake")

include("${CMAKE_CURRENT_LIST_DIR}/DZPTargets.cmake")

function(add_fpic_flag TARGET)
    if(CMAKE_CXX_COMPILER_ID MATCHES "GNU|Clang|AppleClang")
        target_compile_options(${TARGET} PRIVATE -fPIC)
    elseif(MSVC)
        # No fPIC equivalent needed or supported on MSVC
    else()
        message(WARNING "Unknown compiler: fPIC flag not added to target '${TARGET}'")
    endif()
endfunction()

# Optional: check required components if using COMPONENTS in find_package
check_required_components(DirectZ)